<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="{{ url_for('static', filename='bid.png') }}" type="image/png">
    <title>é¡¹ç›®ç»„é•¿ç®¡ç†</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      @keyframes flash-once {
        0% { opacity: 0; transform: scale(0.9); }
        50% { opacity: 1; transform: scale(1.02); }
        100% { opacity: 1; transform: scale(1); }
      }

      .flash-once {
        animation: flash-once 1s ease-in-out;
        transition: opacity 0.5s ease-out;
      }
    </style>

</head>
<body class="p-5">
    <div class="container">
        <h3 class="mb-4">ğŸ‘¥ é¡¹ç›®ç»„é•¿ç®¡ç†</h3>
        <a href="{{ url_for('admin_panel') }}" class="btn btn-secondary mb-4">â¬… è¿”å›é¡¹ç›®ç®¡ç†</a>
        <!-- âœ… æ˜¾ç¤º flash æ¶ˆæ¯ -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} flash-once" role="alert">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <!-- æ·»åŠ ç»„é•¿è¡¨å• -->
        <form method="POST" action="{{ url_for('add_leader') }}" class="row g-3 mb-4">
            <div class="col-md-4">
                <input type="text" class="form-control" name="name" placeholder="å§“å" required>
            </div>
            <div class="col-md-6">
                <input type="email" class="form-control" name="email" placeholder="é‚®ç®±" required>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-success w-100">â• æ·»åŠ ç»„é•¿</button>
            </div>
        </form>

        <!-- ç»„é•¿åˆ—è¡¨ -->
        <div style="max-height: 700px; overflow-y: auto;">
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th>åºå·</th>
                        <th>å§“å</th>
                        <th>é‚®ç®±</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for leader in leaders %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ leader.name }}</td>
                        <td>{{ leader.email }}</td>
                        <td>
                            <a href="{{ url_for('edit_leader', leader_id=leader.id) }}" class="btn btn-warning btn-sm">âœï¸ ç¼–è¾‘</a>
                            <form method="POST" action="{{ url_for('delete_leader', leader_id=leader.id) }}" style="display:inline-block;">
                                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('ç¡®è®¤åˆ é™¤æ­¤ç»„é•¿ï¼Ÿ')">ğŸ—‘ åˆ é™¤</button>
                            </form>
                        </td>
                    </tr>
                    {% else %}
                    <tr><td colspan="4" class="text-center">æš‚æ— ç»„é•¿ä¿¡æ¯</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>


<script>
  window.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => {
      const flashMessages = document.querySelectorAll('.flash-once');
      flashMessages.forEach(msg => {
        msg.style.opacity = '0';
        setTimeout(() => msg.remove(), 500);  // å®Œå…¨ç§»é™¤
      });
    }, 5000);  // â° 5ç§’åæ·¡å‡º
  });
</script>

</body>
</html>
